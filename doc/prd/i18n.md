# PRD: I18n Layer

## Table of Contents

- [1. Overview](#1-overview)
  - [1.1 Purpose](#11-purpose)
  - [1.2 Scope](#12-scope)
  - [1.3 Key Requirements](#13-key-requirements)
  - [1.4 Artifacts](#14-artifacts)
- [2. User Flows](#2-user-flows)
- [3. Technical Specifications](#3-technical-specifications)
  - [3.1 Configuration](#31-configuration)
  - [3.2 Translations](#32-translations)
  - [3.3 Composables](#33-composables)
  - [3.4 Utilities](#34-utilities)
  - [3.5 Server-Side Locale Handling](#35-server-side-locale-handling)
- [4. Testing](#4-testing)
  - [4.1 Translation Coverage Testing](#41-translation-coverage-testing)
  - [4.2 Formatting Testing](#42-formatting-testing)
  - [4.3 Locale Switching Testing](#43-locale-switching-testing)
- [5. Implementation](#5-implementation)
  - [5.1 Layer Structure](#51-layer-structure)
  - [5.2 Definition of Done](#52-definition-of-done)
  - [5.3 Plan](#53-plan)
- [6. Non-Functional Requirements](#6-non-functional-requirements)
  - [6.1 Performance](#61-performance)
  - [6.2 Scalability](#62-scalability)
  - [6.3 Maintainability](#63-maintainability)
  - [6.4 Usability](#64-usability)
  - [6.5 Compatibility](#65-compatibility)

## 1. Overview

### 1.1 Purpose

The I18n Layer provides internationalization (i18n) infrastructure for Nuxt 4 applications, enabling multi-language support with localized number formatting, date formatting, and text translations. It serves as a foundation layer that other layers can extend with their own domain-specific translations while maintaining a consistent localization strategy.

### 1.2 Scope

**Includes**:
- Base i18n configuration using `@nuxtjs/i18n` module
- Common shared translations (UI elements, navigation, status labels)
- Currency and number formatting for supported locales
- Date and time formatting patterns
- Language detection and switching utilities
- Extensible architecture for layer-specific translations
- SSR-compatible locale handling

**Excludes**:
- Domain-specific translations (handled by individual layers: auth, billing, etc.)
- Content management or dynamic translations from database
- Translation editing UI or management interface
- Machine translation or automatic translation services

### 1.3 Key Requirements

**Technical**:
- Nuxt 4 compatibility with SSR support
- Lazy loading of translation files for performance
- Type-safe translation key access (via TypeScript)
- SEO-friendly URL structure with locale prefixes
- Cookie-based locale persistence
- Layer extensibility for distributed translations

**Functional**:
- Support for multiple languages (default: English, Spanish)
- Localized number, currency, and date formatting
- Easy language switching with state persistence
- Consistent translation key structure across layers
- Fallback to default locale for missing translations

### 1.4 Artifacts

**Configuration**:
- `nuxt.config.ts` - Base i18n module configuration with locale settings
- Number format definitions (currency, decimal, percent)
- Date/time format definitions (short, long)

**Translation Files** (Common shared translations):
- `i18n/locales/en/common.json` - English common translations
- `i18n/locales/es/common.json` - Spanish common translations
- `i18n/locales/{locale}/common.json` - Additional locales as needed

**Documentation**:
- Layer extension guide for adding domain-specific translations
- Translation key naming conventions
- Usage examples for all formatting utilities


## 2. User Flows

The I18n layer provides infrastructure only and does not implement user-facing flows. User flows involving language selection and localized content display are defined in the PRDs of layers and applications that consume i18n services.


## 3. Technical Specifications

### 3.1 Configuration

#### 3.1.1 Distributed Translation Architecture

The I18n layer follows a distributed pattern where each layer defines its own translations while inheriting base configuration:

```
┌─────────────────────────────────────────────────────────────┐
│                    Nuxt Application                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐ │
│  │  I18n Layer  │    │  Auth Layer  │    │ Billing Layer│ │
│  │  (Base)      │    │  (Extends)   │    │  (Extends)   │ │
│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘ │
│         │                   │                   │          │
│         │ Common            │ Auth              │ Billing  │
│         │ translations      │ translations      │ trans.   │
│         │                   │                   │          │
│         └───────────────────┴───────────────────┘          │
│                             │                              │
│                     ┌───────▼────────┐                     │
│                     │  @nuxtjs/i18n  │                     │
│                     │     Module     │                     │
│                     └────────────────┘                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Translation Namespacing**:
- **Common** (i18n layer): `$t('common.save')`, `$t('navigation.dashboard')`
- **Auth** (auth layer): `$t('auth.login')`, `$t('auth.errors.invalidCredentials')`
- **Billing** (billing layer): `$t('billing.currentPlan')`, `$t('billing.manageBilling')`

**Key Principles**:
1. Base layer provides common translations and configuration
2. Each layer adds domain-specific translations in its own namespace
3. All layers share number/date formatting rules
4. No translation conflicts due to namespacing

#### 3.1.2 Layer Extension Pattern

**Base Layer Structure** (i18n layer):
```
layers/i18n/
├── i18n/locales/
│   ├── en/
│   │   └── common.json          # Common English translations
│   └── es/
│       └── common.json          # Common Spanish translations
└── nuxt.config.ts               # Base i18n configuration
```

**Extending Layer Structure** (e.g., billing layer):
```
layers/billing/
├── i18n/locales/
│   ├── en/
│   │   └── billing.json         # Billing-specific English
│   └── es/
│       └── billing.json         # Billing-specific Spanish
└── nuxt.config.ts               # Extends base i18n config
```

**Extension Mechanism**:
```typescript
// layers/billing/nuxt.config.ts
export default defineNuxtConfig({
  i18n: {
    locales: [
      {
        code: 'en',
        file: 'en/billing.json'  // Billing layer translations
      },
      {
        code: 'es',
        file: 'es/billing.json'
      }
    ]
  }
})
```

#### 3.1.2 Base I18n Configuration

**Location**: `layers/i18n/nuxt.config.ts`

```typescript
export default defineNuxtConfig({
  modules: ['@nuxtjs/i18n'],
  i18n: {
    defaultLocale: 'en',
    strategy: 'prefix_except_default',  // URLs: /, /es/page
    lazy: true,                         // Lazy load translation files
    detectBrowserLanguage: {
      useCookie: true,
      cookieKey: 'i18n_redirected',
      redirectOn: 'root'
    },

    // Number formatting rules
    numberFormats: {
      en: {
        currency: {
          style: 'currency',
          currency: 'USD',
          notation: 'standard'
        },
        decimal: {
          style: 'decimal',
          minimumFractionDigits: 2,
          maximumFractionDigits: 2
        },
        percent: {
          style: 'percent',
          useGrouping: false
        }
      },
      es: {
        currency: {
          style: 'currency',
          currency: 'EUR',
          notation: 'standard'
        },
        decimal: {
          style: 'decimal',
          minimumFractionDigits: 2,
          maximumFractionDigits: 2
        },
        percent: {
          style: 'percent',
          useGrouping: false
        }
      }
    },

    // Date/time formatting rules
    dateTimeFormats: {
      en: {
        short: {
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        },
        long: {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          weekday: 'long'
        },
        time: {
          hour: 'numeric',
          minute: 'numeric',
          hour12: true
        }
      },
      es: {
        short: {
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        },
        long: {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          weekday: 'long'
        },
        time: {
          hour: 'numeric',
          minute: 'numeric',
          hour12: false
        }
      }
    },

    // Base locales (extended by other layers)
    locales: [
      {
        code: 'en',
        iso: 'en-US',
        name: 'English',
        file: 'en/common.json',
        dir: 'ltr'
      },
      {
        code: 'es',
        iso: 'es-ES',
        name: 'Español',
        file: 'es/common.json',
        dir: 'ltr'
      }
    ]
  }
})
```

#### 3.1.3 URL Strategy

**Strategy**: `prefix_except_default`

**URL Examples**:
- English (default): `https://example.com/dashboard`
- Spanish: `https://example.com/es/dashboard`
- French (if added): `https://example.com/fr/dashboard`

**Benefits**:
- SEO-friendly URLs
- Cleaner default language URLs
- Explicit locale identification
- Easy for users to share localized links

#### 3.2.3 Browser Language Detection

```typescript
detectBrowserLanguage: {
  useCookie: true,                    // Persist choice in cookie
  cookieKey: 'i18n_redirected',       // Cookie name
  redirectOn: 'root',                 // Only redirect on homepage
  alwaysRedirect: false,              // Don't force redirect every time
  fallbackLocale: 'en'                // Fallback if detection fails
}
```

### 3.2 Translations

#### 3.2.1 Translation Structure

**Location**: `layers/i18n/i18n/locales/{locale}/common.json`

**Namespaces**:
- `common`: General UI elements (buttons, actions, states)
- `navigation`: Navigation labels and menu items
- `status`: Status labels and state indicators
- `errors`: Common error messages
- `validation`: Form validation messages

**English Example** (`en/common.json`):
```json
{
  "common": {
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete",
    "edit": "Edit",
    "create": "Create",
    "update": "Update",
    "close": "Close",
    "back": "Back",
    "next": "Next",
    "loading": "Loading...",
    "error": "An error occurred",
    "success": "Success",
    "confirm": "Confirm",
    "yes": "Yes",
    "no": "No"
  },
  "navigation": {
    "home": "Home",
    "dashboard": "Dashboard",
    "settings": "Settings",
    "profile": "Profile",
    "logout": "Logout",
    "login": "Login"
  },
  "status": {
    "active": "Active",
    "inactive": "Inactive",
    "pending": "Pending",
    "completed": "Completed",
    "failed": "Failed",
    "canceled": "Canceled"
  },
  "errors": {
    "generic": "Something went wrong",
    "network": "Network error. Please check your connection.",
    "notFound": "Resource not found",
    "unauthorized": "You are not authorized to perform this action",
    "forbidden": "Access denied"
  },
  "validation": {
    "required": "This field is required",
    "email": "Please enter a valid email",
    "minLength": "Minimum length is {min} characters",
    "maxLength": "Maximum length is {max} characters"
  }
}
```

**Spanish Example** (`es/common.json`):
```json
{
  "common": {
    "save": "Guardar",
    "cancel": "Cancelar",
    "delete": "Eliminar",
    "edit": "Editar",
    "create": "Crear",
    "update": "Actualizar",
    "close": "Cerrar",
    "back": "Atrás",
    "next": "Siguiente",
    "loading": "Cargando...",
    "error": "Ha ocurrido un error",
    "success": "Éxito",
    "confirm": "Confirmar",
    "yes": "Sí",
    "no": "No"
  },
  "navigation": {
    "home": "Inicio",
    "dashboard": "Panel",
    "settings": "Configuración",
    "profile": "Perfil",
    "logout": "Cerrar sesión",
    "login": "Iniciar sesión"
  },
  "status": {
    "active": "Activo",
    "inactive": "Inactivo",
    "pending": "Pendiente",
    "completed": "Completado",
    "failed": "Fallido",
    "canceled": "Cancelado"
  },
  "errors": {
    "generic": "Algo salió mal",
    "network": "Error de red. Por favor verifica tu conexión.",
    "notFound": "Recurso no encontrado",
    "unauthorized": "No estás autorizado para realizar esta acción",
    "forbidden": "Acceso denegado"
  },
  "validation": {
    "required": "Este campo es obligatorio",
    "email": "Por favor ingresa un email válido",
    "minLength": "La longitud mínima es de {min} caracteres",
    "maxLength": "La longitud máxima es de {max} caracteres"
  }
}
```

### 3.3 Composables

#### 3.3.1 `useLocalization()` (Custom Utility)

```typescript
// layers/i18n/composables/useLocalization.ts
export const useLocalization = () => {
  const { locale, t, n, d, setLocale } = useI18n()

  const formatPrice = (price: number, currency?: string) => {
    if (currency) {
      return n(price, { style: 'currency', currency })
    }
    return n(price, 'currency')
  }

  const formatDate = (date: Date | string, format: 'short' | 'long' = 'short') => {
    const dateObj = typeof date === 'string' ? new Date(date) : date
    return d(dateObj, format)
  }

  const formatDateTime = (date: Date | string) => {
    const dateObj = typeof date === 'string' ? new Date(date) : date
    return `${d(dateObj, 'short')} ${d(dateObj, 'time')}`
  }

  const getStatusText = (status: string, namespace = 'status') => {
    return t(`${namespace}.${status}`)
  }

  const isRTL = computed(() => {
    // For RTL language support (Arabic, Hebrew, etc.)
    return ['ar', 'he', 'fa'].includes(locale.value)
  })

  const changeLanguage = async (newLocale: string) => {
    await setLocale(newLocale)
    // Cookie is automatically updated by @nuxtjs/i18n
  }

  return {
    locale: readonly(locale),
    formatPrice,
    formatDate,
    formatDateTime,
    getStatusText,
    isRTL,
    changeLanguage
  }
}
```

**Usage**:
```vue
<script setup>
const { formatPrice, formatDate, getStatusText } = useLocalization()

const displayPrice = computed(() => formatPrice(29.99))
const displayDate = computed(() => formatDate(new Date()))
const statusLabel = computed(() => getStatusText('active'))
</script>
```

### 3.4 Utilities

#### 3.4.1 Text Translation

**Template Usage**:
```vue
<template>
  <div>
    <!-- Direct translation -->
    <h1>{{ $t('navigation.dashboard') }}</h1>
    <button>{{ $t('common.save') }}</button>
    <p v-if="isLoading">{{ $t('common.loading') }}</p>

    <!-- Dynamic keys -->
    <span>{{ $t(`status.${currentStatus}`) }}</span>

    <!-- With parameters -->
    <p>{{ $t('validation.minLength', { min: 8 }) }}</p>

    <!-- Layer-specific translations -->
    <h2>{{ $t('billing.currentPlan') }}</h2>
    <p>{{ $t('auth.errors.invalidCredentials') }}</p>
  </div>
</template>
```

**Script Usage**:
```vue
<script setup>
const { t, locale } = useI18n()

// Reactive translation
const saveLabel = computed(() => t('common.save'))

// Conditional translation
const statusText = computed(() => {
  return t(`status.${currentStatus.value}`)
})

// With parameters
const errorMessage = computed(() => {
  return t('validation.minLength', { min: minLength.value })
})
</script>
```

#### 3.4.2 Number Formatting

**Currency Formatting**:
```vue
<template>
  <div>
    <!-- Format as currency -->
    <p>{{ $n(29.99, 'currency') }}</p>
    <!-- English: $29.99 -->
    <!-- Spanish: 29,99 € -->

    <!-- Custom currency -->
    <p>{{ $n(49.99, { style: 'currency', currency: 'GBP' }) }}</p>
    <!-- Output: £49.99 -->
  </div>
</template>

<script setup>
const { n } = useI18n()

const formatPrice = (price: number) => {
  return n(price, 'currency')
}

const formattedPrice = computed(() => formatPrice(monthlyPrice.value))
</script>
```

**Decimal Formatting**:
```vue
<template>
  <div>
    <!-- Decimal numbers -->
    <p>{{ $n(1234.56, 'decimal') }}</p>
    <!-- English: 1,234.56 -->
    <!-- Spanish: 1.234,56 -->
  </div>
</template>
```

**Percent Formatting**:
```vue
<template>
  <div>
    <!-- Percentage -->
    <p>{{ $n(0.85, 'percent') }}</p>
    <!-- Output: 85% -->

    <p>{{ $n(0.156, 'percent') }}</p>
    <!-- Output: 15.6% (if maxFractionDigits configured) -->
  </div>
</template>
```

#### 3.4.3 Date Formatting

**Short Format**:
```vue
<template>
  <div>
    <!-- Short date -->
    <p>{{ $d(new Date(), 'short') }}</p>
    <!-- English: Jan 15, 2024 -->
    <!-- Spanish: 15 ene 2024 -->
  </div>
</template>

<script setup>
const { d } = useI18n()

const formatDate = (date: Date | string, format: 'short' | 'long' = 'short') => {
  const dateObj = typeof date === 'string' ? new Date(date) : date
  return d(dateObj, format)
}
</script>
```

**Long Format**:
```vue
<template>
  <div>
    <!-- Long date with weekday -->
    <p>{{ $d(new Date(), 'long') }}</p>
    <!-- English: Monday, January 15, 2024 -->
    <!-- Spanish: lunes, 15 de enero de 2024 -->
  </div>
</template>
```

**Time Format**:
```vue
<template>
  <div>
    <!-- Time -->
    <p>{{ $d(new Date(), 'time') }}</p>
    <!-- English: 2:30 PM -->
    <!-- Spanish: 14:30 -->
  </div>
</template>
```

#### 3.4.4 Language Switching

**Language Switcher Component**:
```vue
<template>
  <div class="language-switcher">
    <select v-model="currentLocale" @change="changeLocale">
      <option
        v-for="locale in availableLocales"
        :key="locale.code"
        :value="locale.code"
      >
        {{ locale.name }}
      </option>
    </select>
  </div>
</template>

<script setup>
const { locale, locales, setLocale } = useI18n()
const router = useRouter()

const currentLocale = ref(locale.value)
const availableLocales = computed(() => locales.value)

const changeLocale = async () => {
  await setLocale(currentLocale.value)

  // Optionally navigate to localized route
  const currentPath = router.currentRoute.value.path
  await router.push({
    path: currentPath,
    params: { ...router.currentRoute.value.params, locale: currentLocale.value }
  })
}
</script>
```

**Programmatic Language Change**:
```typescript
const { setLocale } = useI18n()

// Change language
await setLocale('es')

// With navigation
const switchLanguage = async (newLocale: string) => {
  await setLocale(newLocale)
  await navigateTo(localePath(router.currentRoute.value.path, newLocale))
}
```

#### 3.4.5 Layer Extension Guide

**Adding Layer-Specific Translations**

**Step 1**: Create translation directory structure
```bash
# In your layer
mkdir -p i18n/locales/en
mkdir -p i18n/locales/es
```

**Step 2**: Create translation files
```json
// layers/your-layer/i18n/locales/en/your-layer.json
{
  "yourLayer": {
    "title": "Your Layer Title",
    "description": "Your layer description",
    "actions": {
      "create": "Create Item",
      "update": "Update Item"
    }
  }
}
```

**Step 3**: Configure layer i18n
```typescript
// layers/your-layer/nuxt.config.ts
export default defineNuxtConfig({
  i18n: {
    locales: [
      {
        code: 'en',
        file: 'en/your-layer.json'
      },
      {
        code: 'es',
        file: 'es/your-layer.json'
      }
    ]
  }
})
```

**Step 4**: Use in components
```vue
<template>
  <div>
    <h1>{{ $t('yourLayer.title') }}</h1>
    <p>{{ $t('yourLayer.description') }}</p>
  </div>
</template>
```

**Adding New Languages**

**Step 1**: Add locale to base i18n layer
```typescript
// layers/i18n/nuxt.config.ts
export default defineNuxtConfig({
  i18n: {
    locales: [
      // ... existing locales
      {
        code: 'fr',
        iso: 'fr-FR',
        name: 'Français',
        file: 'fr/common.json',
        dir: 'ltr'
      }
    ],
    numberFormats: {
      // ... existing formats
      fr: {
        currency: {
          style: 'currency',
          currency: 'EUR'
        }
      }
    },
    dateTimeFormats: {
      // ... existing formats
      fr: {
        short: {
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        }
      }
    }
  }
})
```

**Step 2**: Create translation files for new locale
```
layers/i18n/i18n/locales/fr/common.json
layers/billing/i18n/locales/fr/billing.json
layers/auth/i18n/locales/fr/auth.json
```

**Step 3**: Test new locale
```bash
# Visit localized URL
https://example.com/fr/dashboard
```

**Translation Key Naming Conventions**

**Namespace Pattern**:
```
{layerName}.{category}.{subCategory?}.{key}
```

**Examples**:
- `common.save` (base layer)
- `billing.currentPlan` (billing layer, top-level)
- `billing.actions.upgrade` (billing layer, with category)
- `auth.errors.invalidCredentials` (auth layer, error category)
- `admin.users.table.headers.name` (deep nesting for organization)

**Best Practices**:
- Use camelCase for translation keys
- Keep nesting depth <= 3 levels when possible
- Group related translations under common categories
- Use consistent category names across layers (actions, errors, labels, etc.)

### 3.5 Server-Side Locale Handling

#### 3.5.1 API Routes with Locale

```typescript
// server/api/localized-content.get.ts
export default defineEventHandler(async (event) => {
  // Get locale from cookie or header
  const locale = getCookie(event, 'i18n_redirected') ||
                 getHeader(event, 'accept-language')?.split(',')[0] ||
                 'en'

  // Use locale for server-side logic
  const content = await getLocalizedContent(locale)

  return {
    locale,
    content
  }
})
```

#### 3.5.2 Email Localization

```typescript
// server/utils/email.ts
export const sendLocalizedEmail = async (
  to: string,
  template: string,
  locale: string,
  data: Record<string, any>
) => {
  const translations = await loadTranslations(locale)

  const emailContent = {
    subject: translations.email[template].subject,
    body: interpolate(translations.email[template].body, data)
  }

  await sendEmail(to, emailContent)
}
```


## 4. Testing

### 4.1 Translation Coverage Testing

**Scope**: Verify all translation keys exist in all locales

**Test Cases**:
- All common translation keys exist in en and es
- Layer-specific translations have matching keys across locales
- No missing translation keys when accessing via `$t()`
- Fallback to default locale works correctly

**Tools**: Vitest with custom translation validator

### 4.2 Formatting Testing

**Scope**: Verify number, currency, and date formatting

**Test Cases**:
- Currency formatting matches locale (USD vs EUR)
- Date formatting uses correct locale format
- Number formatting uses correct thousands/decimal separators
- Time formatting respects 12h/24h preference

**Tools**: Vitest with locale-specific assertions

### 4.3 Locale Switching Testing

**Scope**: Test language switching functionality

**Test Cases**:
- Locale changes via `setLocale()` update UI
- Cookie persists locale selection
- URL updates with locale prefix
- Browser detection works on first visit

**Tools**: Playwright E2E tests


## 5. Implementation

### 5.1 Layer Structure

```
layers/i18n/
├── i18n/
│   └── locales/                   # Translation files
│       ├── en/
│       │   └── common.json        # English common translations
│       └── es/
│           └── common.json        # Spanish common translations
├── composables/
│   └── useLocalization.ts         # Custom i18n utilities
├── types/
│   └── i18n.d.ts                  # TypeScript definitions
├── nuxt.config.ts                 # Base i18n configuration
├── package.json                   # Package metadata
└── README.md                      # Layer documentation
```

### 5.2 Definition of Done

**Acceptance Criteria**

- [ ] `@nuxtjs/i18n` module is configured and working
- [ ] English and Spanish locales are available
- [ ] Common translations are defined for both locales
- [ ] Currency formatting works for USD (en) and EUR (es)
- [ ] Date formatting works with locale-specific patterns
- [ ] Language switcher persists selection via cookie
- [ ] URLs include locale prefix (except default)
- [ ] Browser language detection works on first visit
- [ ] Layers can extend with domain-specific translations
- [ ] SSR-compatible locale handling works correctly

**Interfaces**

- [ ] `useI18n()` composable is accessible
- [ ] `useLocalization()` custom composable is implemented
- [ ] `$t()` template helper works for text translation
- [ ] `$n()` template helper works for number formatting
- [ ] `$d()` template helper works for date formatting
- [ ] Common translation keys are documented
- [ ] Layer extension guide is documented

### 5.3 Plan
- Add TypeScript types

#### 5.3.6 Phase 6: Layer Extension System
- Document layer extension process
- Create example layer with translations
- Test translation merging from multiple layers
- Validate no namespace conflicts

#### 5.3.7 Phase 7: Testing & Documentation
- Write unit tests for formatting utilities
- Create E2E tests for language switching
- Write comprehensive usage documentation
- Create translation coverage validation


## 6. Non-Functional Requirements

### 6.1 Performance

- Translation file lazy loading: < 100ms per locale
- Language switching: < 200ms for UI update
- Memory usage: ~50KB per locale file
- SSR rendering with locale: No measurable overhead

### 6.2 Scalability

- Support for unlimited locales (tested up to 20+)
- Translation files can grow to 1000+ keys without performance impact
- Layer extension supports 10+ layers with domain translations
- Concurrent locale requests handled efficiently

### 6.3 Maintainability

- Clear translation key naming conventions
- Distributed translation management per layer
- JSON format for easy editing and version control
- Type-safe translation key access (via TypeScript)

### 6.4 Usability

- Consistent translation structure across layers
- Intuitive formatting helpers (`$t`, `$n`, `$d`)
- Clear fallback behavior for missing translations
- SEO-friendly URLs with locale prefixes

### 6.5 Compatibility

- Nuxt 4 SSR and SSG support
- Cookie-based persistence across devices
- Browser language detection
- Works with all major browsers (Chrome, Firefox, Safari, Edge)
